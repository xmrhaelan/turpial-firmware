
.. _program_listing_file_components_Network_src_WiFi.h:

Program Listing for File WiFi.h
===============================

|exhale_lsh| :ref:`Return to documentation for file <file_components_Network_src_WiFi.h>` (``components/Network/src/WiFi.h``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #ifndef NETWORK_WIFI_H
   #define NETWORK_WIFI_H
   
   #include <cstdint>
   
   #include <esp_err.h>
   #include <esp_event.h>
   #include <esp_wifi.h>
   
   #include "Sema.h"
   #include "WiFiEventHandler.h"
   
   namespace network {
   
   class WiFiDefaultEventHandler : public WiFiEventHandler
   {
   public:
       WiFiDefaultEventHandler();
   
       virtual esp_err_t staStart();
   
       virtual esp_err_t staStop();
   
   private:
       friend class WiFi;
   
       util::Semaphore m_sta_start_sema; 
       util::Semaphore m_sta_stop_sema;  
   };
   
   struct APConfig {
       const char* ssid;          
       const char* password;      
       wifi_auth_mode_t authmode; 
       std::uint8_t max_conn;     
       std::uint8_t channel;      
   };
   
   struct STAConfig {
       const char* ssid;     
       const char* password; 
   };
   
   class WiFi
   {
   public:
       static WiFi& getInstance()
       {
           static WiFi instance;
           return instance;
       }
   
       WiFi(WiFi const&) = delete; // Copy construct
       WiFi(WiFi&&) = delete;      // Move construct
   
       WiFi& operator=(WiFi const&) = delete; // Copy assign
       WiFi& operator=(WiFi&&) = delete;      // Move assign
   
       esp_err_t init();
   
       esp_err_t setMode(wifi_mode_t mode);
   
       esp_err_t getMode(wifi_mode_t& mode);
   
       esp_err_t setApConfig(APConfig& ap_config);
   
       esp_err_t setApConfig(wifi_config_t& ap_config);
   
       esp_err_t setStaConfig(STAConfig& sta_config);
   
       esp_err_t setStaConfig(wifi_config_t& sta_config);
   
       esp_err_t getApConfig(wifi_config_t& ap_config);
   
       esp_err_t getStaConfig(wifi_config_t& sta_config);
   
       bool isAp();
   
       bool isSta();
   
       esp_err_t start();
   
       esp_err_t stop();
   
       esp_err_t connect();
   
       void setEventHandler(std::unique_ptr<WiFiEventHandler>&& event_handler);
   
   private:
       WiFi();
   
       static esp_err_t eventHandler(void* ctx, system_event_t* event);
   
       WiFiDefaultEventHandler m_event_handler; 
   };
   
   esp_err_t sanitizeSsid(std::uint8_t (&ssid)[32], std::size_t len);
   
   } // namespace network
   
   #endif // NETWORK_WIFI_H
